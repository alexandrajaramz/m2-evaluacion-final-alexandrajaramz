"use strict";const input=document.querySelector(".header__input"),searchBtn=document.querySelector(".header__btn"),resultsList=document.querySelector(".results__list"),favsList=document.querySelector(".favs__list");function loadLSFavs(){if(JSON.parse(localStorage.getItem("favsRemember"))){let e=JSON.parse(localStorage.getItem("favsRemember"));for(const t of e)favsList.innerHTML+=`<li class="favs__item" data-id="${t.id}">\n                            <div class="itemShow-wrapper">\n                              <img class="favs__item-cover" src="${t.image}" alt="Portada de ${t.title}">\n                              <h2 class="favs__item-title">${t.title}</h2>\n                            </div>\n                          </li>`}}loadLSFavs();let favs=[];function createFavs(e){const t=e.currentTarget;t.classList.toggle("show__fav"),JSON.parse(localStorage.getItem("favsRemember"))&&(favs=JSON.parse(localStorage.getItem("favsRemember")));const s=t.getAttribute("data-id"),a={id:s,image:t.querySelector(".itemShow-cover").src,title:t.querySelector(".itemShow-title").innerHTML};if(!1===favs.includes(s))favs.push(a);else{const e=favs.indexOf(s);e>-1&&favs.splice(e,1)}favsList.innerHTML+=`<li class="favs__item" data-id="${a.id}">\n                          <div class="itemShow-wrapper">\n                            <img class="favs__item-cover" src="${a.image}" alt="Portada de ${a.title}">\n                            <h2 class="favs__item-title">${a.title}</h2>\n                          </div>\n                        </li>`,localStorage.setItem("favsRemember",JSON.stringify(favs))}function search(){let e=input.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(e=>e.json()).then(e=>{let t="";for(const s of e){let e=s.show.name,a="";t+=`<li class="results__itemShow" data-id="${e}">\n                          <div class="itemShow-wrapper">                           <img class="itemShow-cover" src="${a=null===s.show.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":`${s.show.image.medium}`}" alt="Portada de ${e}">\n                            <h2 class="itemShow-title">${e}</h2>\n                          </div>\n                       </li>`}resultsList.innerHTML=t;const s=document.querySelectorAll(".results__itemShow");for(const e of s)e.addEventListener("click",createFavs)})}function enter(e){13===e.keyCode&&search()}searchBtn.addEventListener("click",search),input.addEventListener("keyup",enter);